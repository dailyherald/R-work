theme(
plot.background = element_rect(fill = "white"),
plot.title = element_text(size = 24),
plot.subtitle = element_text(size = 16),
plot.caption=element_text(size=12, hjust=0),
legend.position="right",
legend.direction="vertical",
legend.background = element_rect(fill = "white"),
legend.title=element_text(size=10, face="bold"),
legend.text=element_text(size=9.75),
legend.text.align = 0.5, # 0 = left, 1 = right
axis.text.x=element_blank(),
axis.text.y=element_blank(),
panel.grid.major = element_blank(),
panel.background = element_blank(),
...
)
}
map <- ggplot(ill_f,
aes(long, lat, group = group, fill = Rchg_65over_quantiles)
) +
geom_polygon( color = "white", size = 0.15) + coord_map() + theme_map()
map <- map + labs(
title="65 and over", # your headline
subtitle="Percent change in the rate\nper 1,000 of persons aged 65\nand over, 2010 - 2016",
caption="\nSource: Census.gov",
fill = "PERCENT CHANGE")
map <- map +
theme(legend.position = "top", legend.direction = "horizontal") +
scale_fill_manual(
values = c("#a6611a", "#dfc27d", "#f6e8c3", "#80cdc1", "#018571"),
drop = FALSE,
labels = labels_scale,
guide = guide_legend(
direction = "horizontal",
keyheight = unit(2, units = "mm"),
keywidth = unit(70 / length(labels), units = "mm"),
title.position = 'top',
# I shift the labels around, the should be placed
# exactly at the right end of each legend key
title.hjust = 0.5,
#label.hjust = 1,
nrow = 1,
byrow = T,
# Can reverse the legend if that's clearer
reverse = F,
label.position = "bottom"
)
)
map
legend.key.size
theme_map <- function(...) {
theme_fivethirtyeight() +
theme(
plot.background = element_rect(fill = "white"),
plot.title = element_text(size = 24),
plot.subtitle = element_text(size = 16),
plot.caption=element_text(size=12, hjust=0),
legend.position="right",
legend.direction="vertical",
legend.background = element_rect(fill = "white"),
legend.title=element_text(size=10, face="bold"),
legend.text=element_text(size=9.75),
legend.text.align = 0, # 0 = left, 1 = right
axis.text.x=element_blank(),
axis.text.y=element_blank(),
panel.grid.major = element_blank(),
panel.background = element_blank(),
...
)
}
map <- ggplot(ill_f,
aes(long, lat, group = group, fill = Rchg_65over_quantiles)
) +
geom_polygon( color = "white", size = 0.15) + coord_map() + theme_map()
map <- map + labs(
title="65 and over", # your headline
subtitle="Percent change in the rate\nper 1,000 of persons aged 65\nand over, 2010 - 2016",
caption="\nSource: Census.gov",
fill = "PERCENT CHANGE")
map <- map +
theme(legend.position = "top", legend.direction = "horizontal") +
scale_fill_manual(
values = c("#a6611a", "#dfc27d", "#f6e8c3", "#80cdc1", "#018571"),
drop = FALSE,
labels = labels_scale,
guide = guide_legend(
direction = "horizontal",
keyheight = unit(2, units = "mm"),
keywidth = unit(70 / length(labels), units = "mm"),
title.position = 'top',
# I shift the labels around, the should be placed
# exactly at the right end of each legend key
title.hjust = 0.5,
#label.hjust = 1,
nrow = 1,
byrow = T,
# Can reverse the legend if that's clearer
reverse = F,
label.position = "bottom"
)
)
map
map <- map +
theme(legend.position = "top", legend.direction = "horizontal") +
scale_fill_manual(
values = c("#a6611a", "#dfc27d", "#f6e8c3", "#80cdc1", "#018571"),
drop = FALSE,
labels = labels_scale,
guide = guide_legend(
direction = "horizontal",
keyheight = unit(2, units = "mm"),
keywidth = unit(80 / length(labels), units = "mm"),
title.position = 'top',
# I shift the labels around, the should be placed
# exactly at the right end of each legend key
title.hjust = 0.5,
#label.hjust = 1,
nrow = 1,
byrow = T,
# Can reverse the legend if that's clearer
reverse = F,
label.position = "bottom"
)
)
map
map <- map +
theme(legend.position = "top", legend.direction = "horizontal") +
scale_fill_manual(
values = c("#a6611a", "#dfc27d", "#f6e8c3", "#80cdc1", "#018571"),
drop = FALSE,
labels = labels_scale,
guide = guide_legend(
direction = "horizontal",
keyheight = unit(2, units = "mm"),
keywidth = unit(75 / length(labels), units = "mm"),
title.position = 'top',
# I shift the labels around, the should be placed
# exactly at the right end of each legend key
title.hjust = 0.5,
#label.hjust = 1,
nrow = 1,
byrow = T,
# Can reverse the legend if that's clearer
reverse = F,
label.position = "bottom"
)
)
map
theme_map <- function(...) {
theme_fivethirtyeight() +
theme(
plot.background = element_rect(fill = "white"),
plot.title = element_text(size = 24),
plot.subtitle = element_text(size = 16),
plot.caption=element_text(size=12, hjust=0),
legend.position="right",
legend.direction="vertical",
legend.background = element_rect(fill = "white"),
legend.title=element_text(size=10, face="bold"),
legend.text=element_text(size=10),
legend.text.align = 0, # 0 = left, 1 = right
axis.text.x=element_blank(),
axis.text.y=element_blank(),
panel.grid.major = element_blank(),
panel.background = element_blank(),
...
)
}
map <- ggplot(ill_f,
aes(long, lat, group = group, fill = Rchg_65over_quantiles)
) +
geom_polygon( color = "white", size = 0.15) + coord_map() + theme_map()
map <- map + labs(
title="65 and over", # your headline
subtitle="Percent change in the rate\nper 1,000 of persons aged 65\nand over, 2010 - 2016",
caption="\nSource: Census.gov",
fill = "PERCENT CHANGE")
map <- map +
theme(legend.position = "top", legend.direction = "horizontal") +
scale_fill_manual(
values = c("#a6611a", "#dfc27d", "#f6e8c3", "#80cdc1", "#018571"),
drop = FALSE,
labels = labels_scale,
guide = guide_legend(
direction = "horizontal",
keyheight = unit(2, units = "mm"),
keywidth = unit(75 / length(labels), units = "mm"),
title.position = 'top',
# I shift the labels around, the should be placed
# exactly at the right end of each legend key
title.hjust = 0.5,
#label.hjust = 1,
nrow = 1,
byrow = T,
# Can reverse the legend if that's clearer
reverse = F,
label.position = "bottom"
)
)
map
labels2 <- c()
for(idx in 1:length(quantiles)){
labels2 <- c(labels2, paste0(round(quantiles[idx], 1),
"%-\n",
round(quantiles[idx + 1], 1),
"%"
))
}
labels2 <- labels2[1:length(labels2)-1]
ill_f$Rchg_65over_brks <- cut(ill_f$Rchg_65over,
breaks = quantiles,
include.lowest = TRUE,
labels = labels2)
brks_scale <- levels(ill_f$Rchg_65over_brks)
labels_scale <-brks_scale
labels_scale
map <- ggplot(ill_f,
aes(long, lat, group = group, fill = Rchg_65over_quantiles)
) +
geom_polygon( color = "white", size = 0.15) + coord_map() + theme_map()
map <- map + labs(
title="65 and over", # your headline
subtitle="Percent change in the rate\nper 1,000 of persons aged 65\nand over, 2010 - 2016",
caption="\nSource: Census.gov",
fill = "PERCENT CHANGE")
map <- map +
theme(legend.position = "top", legend.direction = "horizontal") +
scale_fill_manual(
values = c("#a6611a", "#dfc27d", "#f6e8c3", "#80cdc1", "#018571"),
drop = FALSE,
labels = labels_scale,
guide = guide_legend(
direction = "horizontal",
keyheight = unit(2, units = "mm"),
keywidth = unit(75 / length(labels), units = "mm"),
title.position = 'top',
# I shift the labels around, the should be placed
# exactly at the right end of each legend key
title.hjust = 0.5,
#label.hjust = 1,
nrow = 1,
byrow = T,
# Can reverse the legend if that's clearer
reverse = F,
label.position = "bottom"
)
)
map
labels2 <- c()
for(idx in 1:length(quantiles)){
labels2 <- c(labels2,round(quantiles[idx], 2))
}
labels2 <- labels2[1:length(labels2)-1]
ill_f$Rchg_65over_brks <- cut(ill_f$Rchg_65over,
breaks = quantiles,
include.lowest = TRUE,
labels = labels2)
brks_scale <- levels(ill_f$Rchg_65over_brks)
labels_scale <-brks_scale
labels_scale
map <- ggplot(ill_f,
aes(long, lat, group = group, fill = Rchg_65over_quantiles)
) +
geom_polygon( color = "white", size = 0.15) + coord_map() + theme_map()
map <- map + labs(
title="65 and over", # your headline
subtitle="Percent change in the rate\nper 1,000 of persons aged 65\nand over, 2010 - 2016",
caption="\nSource: Census.gov",
fill = "PERCENT CHANGE")
map <- map +
theme(legend.position = "top", legend.direction = "horizontal") +
scale_fill_manual(
values = c("#a6611a", "#dfc27d", "#f6e8c3", "#80cdc1", "#018571"),
drop = FALSE,
labels = labels_scale,
guide = guide_legend(
direction = "horizontal",
keyheight = unit(2, units = "mm"),
keywidth = unit(75 / length(labels), units = "mm"),
title.position = 'top',
# I shift the labels around, the should be placed
# exactly at the right end of each legend key
title.hjust = 0.5,
#label.hjust = 1,
nrow = 1,
byrow = T,
# Can reverse the legend if that's clearer
reverse = F,
label.position = "bottom"
)
)
map
labels2 <- c()
for(idx in 1:length(quantiles)){
labels2 <- c(labels2,round(quantiles[idx], 1),
"%")
}
labels2 <- labels2[1:length(labels2)-1]
ill_f$Rchg_65over_brks <- cut(ill_f$Rchg_65over,
breaks = quantiles,
include.lowest = TRUE,
labels = labels2)
labels2 <- c()
for(idx in 1:length(quantiles)){
labels2 <- c(labels2,round(quantiles[idx], 1),
"%")
}
labels2 <- labels2[1:length(labels2)-1]
ill_f$Rchg_65over_brks <- cut(ill_f$Rchg_65over,
breaks = quantiles,
include.lowest = TRUE,
labels = labels2)
labels2 <- c()
for(idx in 1:length(quantiles)){
labels2 <- c(labels2,paste0(round(quantiles[idx], 1),
"%")
)
}
labels2 <- labels2[1:length(labels2)-1]
ill_f$Rchg_65over_brks <- cut(ill_f$Rchg_65over,
breaks = quantiles,
include.lowest = TRUE,
labels = labels2)
brks_scale <- levels(ill_f$Rchg_65over_brks)
labels_scale <-brks_scale
labels_scale
map <- ggplot(ill_f,
aes(long, lat, group = group, fill = Rchg_65over_quantiles)
) +
geom_polygon( color = "white", size = 0.15) + coord_map() + theme_map()
map <- map + labs(
title="65 and over", # your headline
subtitle="Percent change in the rate\nper 1,000 of persons aged 65\nand over, 2010 - 2016",
caption="\nSource: Census.gov",
fill = "PERCENT CHANGE")
map <- map +
theme(legend.position = "top", legend.direction = "horizontal") +
scale_fill_manual(
values = c("#a6611a", "#dfc27d", "#f6e8c3", "#80cdc1", "#018571"),
drop = FALSE,
labels = labels_scale,
guide = guide_legend(
direction = "horizontal",
keyheight = unit(2, units = "mm"),
keywidth = unit(75 / length(labels), units = "mm"),
title.position = 'top',
# I shift the labels around, the should be placed
# exactly at the right end of each legend key
title.hjust = 0.5,
#label.hjust = 1,
nrow = 1,
byrow = T,
# Can reverse the legend if that's clearer
reverse = F,
label.position = "bottom"
)
)
map
map <- ggplot(ill_f,
aes(long, lat, group = group, fill = Rchg_65over_quantiles)
) +
geom_polygon( color = "white", size = 0.15) + coord_map() + theme_map()
map <- map + labs(
title="65 and over", # your headline
subtitle="Percent change in the rate\nper 1,000 of persons aged 65\nand over, 2010 - 2016",
caption="\nSource: Census.gov",
fill = "PERCENT CHANGE")
map <- map +
theme(legend.position = "top", legend.direction = "horizontal") +
scale_fill_manual(
# viridis, magma, plasma or inferno
# (#) = number of breaks, [4:8] takes last 5
values = magma(8)[3:7],
drop = FALSE,
labels = labels_scale,
guide = guide_legend(
direction = "horizontal",
keyheight = unit(2, units = "mm"),
keywidth = unit(75 / length(labels), units = "mm"),
title.position = 'top',
# I shift the labels around, the should be placed
# exactly at the right end of each legend key
title.hjust = 0.5,
#label.hjust = 1,
nrow = 1,
byrow = T,
# Can reverse the legend if that's clearer
reverse = F,
label.position = "bottom"
)
)
map
labels2 <- c()
for(idx in 1:length(quantiles)){
labels2 <- c(labels2,paste0(round(quantiles[idx], 1),
"%")
)
}
labels2
labels2 <- labels2[1:length(labels2)-1]
ill_f$Rchg_65over_brks <- cut(ill_f$Rchg_65over,
breaks = quantiles,
include.lowest = TRUE,
include.highest = TRUE,
labels = labels2)
brks_scale <- levels(ill_f$Rchg_65over_brks)
labels_scale <-brks_scale
labels_scale
ill_f$Rchg_65over_brks <- cut(ill_f$Rchg_65over,
breaks = quantiles,
include.lowest = FALSE,
labels = labels2)
brks_scale <- levels(ill_f$Rchg_65over_brks)
labels_scale <-brks_scale
labels_scale
labels2 <- c()
for(idx in 1:length(quantiles)){
labels2 <- c(labels2, paste0(round(quantiles[idx], 1),
"-\n",
round(quantiles[idx + 1], 1),
"%"
))
}
labels2 <- labels2[1:length(labels2)-1]
ill_f$Rchg_65over_brks <- cut(ill_f$Rchg_65over,
breaks = quantiles,
include.lowest = TRUE,
labels = labels2)
brks_scale <- levels(ill_f$Rchg_65over_brks)
labels_scale <-brks_scale
labels_scale
map <- ggplot(ill_f,
aes(long, lat, group = group, fill = Rchg_65over_quantiles)
) +
geom_polygon( color = "white", size = 0.15) + coord_map() + theme_map()
map <- map + labs(
title="65 and over", # your headline
subtitle="Percent change in the rate\nper 1,000 of persons aged 65\nand over, 2010 - 2016",
caption="\nSource: Census.gov",
fill = "PERCENT CHANGE")
map <- map +
theme(legend.position = "top", legend.direction = "horizontal") +
scale_fill_manual(
values = c("#a6611a", "#dfc27d", "#f6e8c3", "#80cdc1", "#018571"),
drop = FALSE,
labels = labels_scale,
guide = guide_legend(
direction = "horizontal",
keyheight = unit(2, units = "mm"),
keywidth = unit(75 / length(labels), units = "mm"),
title.position = 'top',
# I shift the labels around, the should be placed
# exactly at the right end of each legend key
title.hjust = 0.5,
#label.hjust = 1,
nrow = 1,
byrow = T,
# Can reverse the legend if that's clearer
reverse = F,
label.position = "bottom"
)
)
map
labels2 <- c()
for(idx in 1:length(quantiles)){
labels2 <- c(labels2, paste0(round(quantiles[idx], 1),
" -\n",
round(quantiles[idx + 1], 1),
"%"
))
}
labels2 <- labels2[1:length(labels2)-1]
ill_f$Rchg_65over_brks <- cut(ill_f$Rchg_65over,
breaks = quantiles,
include.lowest = TRUE,
labels = labels2)
brks_scale <- levels(ill_f$Rchg_65over_brks)
labels_scale <-brks_scale
labels_scale
map <- ggplot(ill_f,
aes(long, lat, group = group, fill = Rchg_65over_quantiles)
) +
geom_polygon( color = "white", size = 0.15) + coord_map() + theme_map()
map <- map + labs(
title="65 and over", # your headline
subtitle="Percent change in the rate\nper 1,000 of persons aged 65\nand over, 2010 - 2016",
caption="\nSource: Census.gov",
fill = "PERCENT CHANGE")
map <- map +
theme(legend.position = "top", legend.direction = "horizontal") +
scale_fill_manual(
values = c("#a6611a", "#dfc27d", "#f6e8c3", "#80cdc1", "#018571"),
drop = FALSE,
labels = labels_scale,
guide = guide_legend(
direction = "horizontal",
keyheight = unit(2, units = "mm"),
keywidth = unit(75 / length(labels), units = "mm"),
title.position = 'top',
# I shift the labels around, the should be placed
# exactly at the right end of each legend key
title.hjust = 0.5,
#label.hjust = 1,
nrow = 1,
byrow = T,
# Can reverse the legend if that's clearer
reverse = F,
label.position = "bottom"
)
)
map
