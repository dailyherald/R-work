df <- read_csv("dfsubset.csv")
names(df)
library(ggplot2)
library(ggthemes)
df$force <- factor(df$force, levels = c("Transitions","SOF_only","UOF_only"),
labels = c("Transitions","Show of force","Use of force" ))
df$force <- factor(df$set, levels = c("Transitions","SOF_only","UOF_only"),
labels = c("Transitions","Show of force","Use of force" ))
stacked <- ggplot(df) + # ggplot(dataframe name)
aes(x = reorder(Year_Quarter, -sort), # column for the x axis
y = value, # Column with values that get plotted
fill = set, # Column with values that decide color
label = value) + # have the values appear on the bars
geom_bar(stat = "identity") + # leave these last lines alone
coord_flip() + theme_fivethirtyeight()
stacked <- stacked + labs(
title="Response to resistance", # your headline
subtitle="Elgin police have increased their use of\nnon-lethal force in response to resistance.",
x="YEAR, QUARTER",
y="TYPES OF RESPONSE TO RESISTANCE",
caption="\nNote: Show of Force and Use of Force are incidents where \npolice only warned or only used force in repsonse to resistance. \nTransition is incidents where police showed then used force. \nSource: Elgin police")
stacked <- stacked +
theme(legend.position="top",
legend.direction="horizontal",
legend.title = element_blank())
stacked <- stacked + geom_text(
position = "stack",
aes(x = Year_Quarter,
y = value - (value * 0.025),
hjust = 1,
label = value),
size=5,
fontface="bold",
color="white"
)
stacked <- stacked + theme(
plot.background = element_rect(fill = "white"),
legend.background = element_rect(fill = "white"),
plot.title = element_text(size = 32),
plot.subtitle = element_text(size = 20),
legend.text=element_text(size=16),
axis.title=element_text(size=16, face="bold"),
axis.text=element_text(size=14),
plot.caption=element_text(size=14, hjust=0)
)
stacked
df$set <- factor(df$set, levels = c("Transitions","SOF_only","UOF_only"),
labels = c("Transitions","Show of force","Use of force" ))
stacked <- ggplot(df) + # ggplot(dataframe name)
aes(x = reorder(Year_Quarter, -sort), # column for the x axis
y = value, # Column with values that get plotted
fill = set, # Column with values that decide color
label = value) + # have the values appear on the bars
geom_bar(stat = "identity") + # leave these last lines alone
coord_flip() + theme_fivethirtyeight()
stacked <- stacked + labs(
title="Response to resistance", # your headline
subtitle="Elgin police have increased their use of\nnon-lethal force in response to resistance.",
x="YEAR, QUARTER",
y="TYPES OF RESPONSE TO RESISTANCE",
caption="\nNote: Show of Force and Use of Force are incidents where \npolice only warned or only used force in repsonse to resistance. \nTransition is incidents where police showed then used force. \nSource: Elgin police")
stacked <- stacked +
theme(legend.position="top",
legend.direction="horizontal",
legend.title = element_blank())
stacked <- stacked + geom_text(
position = "stack",
aes(x = Year_Quarter,
y = value - (value * 0.025),
hjust = 1,
label = value),
size=5,
fontface="bold",
color="white"
)
stacked <- stacked + theme(
plot.background = element_rect(fill = "white"),
legend.background = element_rect(fill = "white"),
plot.title = element_text(size = 32),
plot.subtitle = element_text(size = 20),
legend.text=element_text(size=16),
axis.title=element_text(size=16, face="bold"),
axis.text=element_text(size=14),
plot.caption=element_text(size=14, hjust=0)
)
stacked
grouped <- ggplot(df) +
aes(x = reorder(Year_Quarter, -sort),
value,
fill = set,
label = value) +
geom_bar(stat = "identity", position = position_dodge(width = NULL)) +
coord_flip() + theme_fivethirtyeight()
grouped <- grouped + labs(
title="Response to resistance", # your headline
subtitle="Elgin police have increased their use of\nnon-lethal force in response to resistance.",
x="YEAR, QUARTER",
y="TYPES OF RESPONSE TO RESISTANCE",
caption="\nNote: Show of Force and Use of Force are incidents where \npolice only warned or only used force in repsonse to resistance. \nTransition is incidents where police showed then used force. \nSource: Elgin police")
grouped <- grouped +
theme(legend.position="top",
legend.direction="horizontal",
legend.title = element_blank())
grouped <- grouped + geom_text(
position = position_dodge(width = 0.9),
aes(x = Year_Quarter,
y = value - (value * 0.1),
vjust = 0.5,
label = value),
size=5,
fontface="bold",
color="white"
)
grouped <- grouped + theme(
plot.background = element_rect(fill = "white"),
legend.background = element_rect(fill = "white"),
plot.title = element_text(size = 32),
plot.subtitle = element_text(size = 20),
legend.text=element_text(size=16),
axis.title=element_text(size=16, face="bold"),
axis.text=element_text(size=14),
plot.caption=element_text(size=14, hjust=0)
)
grouped
library(readr)
df <- read_csv("dfsubset.csv")
library(ggplot2)
library(ggthemes)
df$force <- factor(df$force, levels = c("Total_transitions","SOF_only","UOF_only"),
labels = c("Transitions","Show of force","Use of force" ))
df$set <- factor(df$set, levels = c("Transitions","SOF_only","UOF_only"),
labels = c("Transitions","Show of force","Use of force" ))
pLine <- ggplot(df) +
aes(Year_Quarter,
value,
group = set,
color = set) +
geom_line(stat="identity",
size = 1.5) +
geom_point(stat="identity",
size = 3,
shape=21,
fill="white") +
theme_fivethirtyeight()
pLine <- pLine + scale_x_discrete(
labels=c("1Q\n2014","2Q","3Q","4Q","1Q\n2015","2Q","3Q","4Q","1Q\n2016","2Q","3Q","4Q")
)
pLine <- pLine +
scale_y_continuous(breaks=c(seq(0,40,5)) )
pLine <- pLine + labs(
title="Response to resistance", # your headline
subtitle="Elgin police have increased their use of\nnon-lethal force in response to resistance.",
x="YEAR, QUARTER",
y="NUMBER PER QUARTER",
caption="\nNote: Show of Force and Use of Force are incidents where \npolice only warned or only used force in repsonse to resistance. \nTransition is incidents where police showed then used force. \nSource: Elgin police")
pLine <- pLine +
theme(legend.position="top",
legend.direction="horizontal",
legend.title = element_blank())
pLine <- pLine + theme(
plot.background = element_rect(fill = "white"),
legend.background = element_rect(fill = "white"),
plot.title = element_text(size = 32),
plot.subtitle = element_text(size = 20),
legend.text=element_text(size=16),
axis.title=element_text(size=16, face="bold"),
axis.text=element_text(size=14),
plot.caption=element_text(size=14, hjust=0)
)
pLine
library(readr)
df <- read_csv("dfsubset.csv")
library(ggplot2)
library(ggthemes)
df$set <- factor(df$set, levels = c("Transitions","SOF_only","UOF_only"),
labels = c("Transitions","Show of force","Use of force" ))
pArea <- ggplot(df) +
aes(Year_Quarter,
value,
group = set,
fill = set) +
geom_area(stat="identity") +
theme_fivethirtyeight()
pArea <- pArea + scale_x_discrete(
labels=c("1Q\n2014","2Q","3Q","4Q","1Q\n2015","2Q","3Q","4Q","1Q\n2016","2Q","3Q","4Q")
)
pArea <- pArea +
scale_y_continuous(breaks=c(seq(0,60,5)) )
pArea <- pArea + labs(
title="Response to resistance", # your headline
subtitle="Elgin police have increased their use of\nnon-lethal force in response to resistance.",
x="YEAR, QUARTER",
y="NUMBER PER QUARTER",
caption="\nNote: Show of Force and Use of Force are incidents where \npolice only warned or only used force in repsonse to resistance. \nTransition is incidents where police showed then used force. \nSource: Elgin police")
pArea <- pArea +
theme(legend.position="top",
legend.direction="horizontal",
legend.title = element_blank())
pArea <- pArea + theme(
plot.background = element_rect(fill = "white"),
legend.background = element_rect(fill = "white"),
plot.title = element_text(size = 32),
plot.subtitle = element_text(size = 20),
legend.text=element_text(size=16),
axis.title=element_text(size=16, face="bold"),
axis.text=element_text(size=14),
plot.caption=element_text(size=14, hjust=0)
)
pArea
library(readr)
df <- read_csv("dfsubset.csv")
library(ggplot2)
library(ggthemes)
df$set <- factor(df$set, levels = c("Total_transitions","SOF_only","UOF_only"),
labels = c("Transitions","Show of force","Use of force" ))
pScat <- ggplot(df) +
aes(Year_Quarter,
value,
color = set) +
geom_point(stat="identity") +
theme_fivethirtyeight()
pScat <- ggplot(df) +
aes(Year_Quarter,
value,
fill = set) +
geom_point(stat="identity",
shape = 21,
size=3,
color = "white") +
theme_fivethirtyeight()
pScat <- pScat + scale_x_discrete(
labels=c("1Q\n2014","2Q","3Q","4Q","1Q\n2015","2Q","3Q","4Q","1Q\n2016","2Q","3Q","4Q")
)
pScat <- pScat +
scale_y_continuous(breaks=c(seq(0,40,5)) )
pScat <- pScat + labs(
title="Response to resistance", # your headline
subtitle="Elgin police have increased their use of\nnon-lethal force in response to resistance.",
x="YEAR, QUARTER",
y="NUMBER PER QUARTER",
caption="\nNote: Show of Force and Use of Force are incidents where \npolice only warned or only used force in repsonse to resistance. \nTransition is incidents where police showed then used force. \nSource: Elgin police")
pScat <- pScat +
theme(legend.position="top",
legend.direction="horizontal",
legend.title = element_blank())
pScat <- pScat + theme(
plot.background = element_rect(fill = "white"),
legend.background = element_rect(fill = "white"),
plot.title = element_text(size = 32),
plot.subtitle = element_text(size = 20),
legend.text=element_text(size=16),
axis.title=element_text(size=16, face="bold"),
axis.text=element_text(size=14),
plot.caption=element_text(size=14, hjust=0)
)
pScat
df$set <- factor(df$set, levels = c("Transitions","SOF_only","UOF_only"),
labels = c("Transitions","Show of force","Use of force" ))
pScat <- ggplot(df) +
aes(Year_Quarter,
value,
color = set) +
geom_point(stat="identity") +
theme_fivethirtyeight()
pScat <- ggplot(df) +
aes(Year_Quarter,
value,
fill = set) +
geom_point(stat="identity",
shape = 21,
size=3,
color = "white") +
theme_fivethirtyeight()
pScat <- pScat + scale_x_discrete(
labels=c("1Q\n2014","2Q","3Q","4Q","1Q\n2015","2Q","3Q","4Q","1Q\n2016","2Q","3Q","4Q")
)
pScat <- pScat +
scale_y_continuous(breaks=c(seq(0,40,5)) )
pScat <- pScat + labs(
title="Response to resistance", # your headline
subtitle="Elgin police have increased their use of\nnon-lethal force in response to resistance.",
x="YEAR, QUARTER",
y="NUMBER PER QUARTER",
caption="\nNote: Show of Force and Use of Force are incidents where \npolice only warned or only used force in repsonse to resistance. \nTransition is incidents where police showed then used force. \nSource: Elgin police")
pScat <- pScat +
theme(legend.position="top",
legend.direction="horizontal",
legend.title = element_blank())
pScat <- pScat + theme(
plot.background = element_rect(fill = "white"),
legend.background = element_rect(fill = "white"),
plot.title = element_text(size = 32),
plot.subtitle = element_text(size = 20),
legend.text=element_text(size=16),
axis.title=element_text(size=16, face="bold"),
axis.text=element_text(size=14),
plot.caption=element_text(size=14, hjust=0)
)
pScat
df$set <- factor(df$set, levels = c("Transitions","SOF_only","UOF_only"),
labels = c("Transitions","Show of force","Use of force" ))
pScat <- ggplot(df) +
aes(Year_Quarter,
value,
color = set) +
geom_point(stat="identity") +
theme_fivethirtyeight()
pScat <- ggplot(df) +
aes(Year_Quarter,
value,
fill = set) +
geom_point(stat="identity",
shape = 21,
size=3,
color = "white") +
theme_fivethirtyeight()
pScat <- pScat + scale_x_discrete(
labels=c("1Q\n2014","2Q","3Q","4Q","1Q\n2015","2Q","3Q","4Q","1Q\n2016","2Q","3Q","4Q")
)
pScat <- pScat +
scale_y_continuous(breaks=c(seq(0,40,5)) )
pScat <- pScat + labs(
title="Response to resistance", # your headline
subtitle="Elgin police have increased their use of\nnon-lethal force in response to resistance.",
x="YEAR, QUARTER",
y="NUMBER PER QUARTER",
caption="\nNote: Show of Force and Use of Force are incidents where \npolice only warned or only used force in repsonse to resistance. \nTransition is incidents where police showed then used force. \nSource: Elgin police")
pScat <- pScat +
theme(legend.position="top",
legend.direction="horizontal",
legend.title = element_blank())
pScat <- pScat + theme(
plot.background = element_rect(fill = "white"),
legend.background = element_rect(fill = "white"),
plot.title = element_text(size = 32),
plot.subtitle = element_text(size = 20),
legend.text=element_text(size=16),
axis.title=element_text(size=16, face="bold"),
axis.text=element_text(size=14),
plot.caption=element_text(size=14, hjust=0)
)
pScat
library(readr)
df <- read_csv("dfsubset.csv")
library(ggplot2)
library(ggthemes)
df$set <- factor(df$set, levels = c("Transitions","SOF_only","UOF_only"),
labels = c("Transitions","Show of force","Use of force" ))
pScat <- ggplot(df) +
aes(Year_Quarter,
value,
color = set) +
geom_point(stat="identity") +
theme_fivethirtyeight()
pScat <- ggplot(df) +
aes(Year_Quarter,
value,
fill = set) +
geom_point(stat="identity",
shape = 21,
size=3,
color = "white") +
theme_fivethirtyeight()
pScat <- pScat + scale_x_discrete(
labels=c("1Q\n2014","2Q","3Q","4Q","1Q\n2015","2Q","3Q","4Q","1Q\n2016","2Q","3Q","4Q")
)
pScat <- pScat +
scale_y_continuous(breaks=c(seq(0,40,5)) )
pScat <- pScat + labs(
title="Response to resistance", # your headline
subtitle="Elgin police have increased their use of\nnon-lethal force in response to resistance.",
x="YEAR, QUARTER",
y="NUMBER PER QUARTER",
caption="\nNote: Show of Force and Use of Force are incidents where \npolice only warned or only used force in repsonse to resistance. \nTransition is incidents where police showed then used force. \nSource: Elgin police")
pScat <- pScat +
theme(legend.position="top",
legend.direction="horizontal",
legend.title = element_blank())
pScat <- pScat + theme(
plot.background = element_rect(fill = "white"),
legend.background = element_rect(fill = "white"),
plot.title = element_text(size = 32),
plot.subtitle = element_text(size = 20),
legend.text=element_text(size=16),
axis.title=element_text(size=16, face="bold"),
axis.text=element_text(size=14),
plot.caption=element_text(size=14, hjust=0)
)
pScat
library(readr)
df <- read_csv("dfsubset.csv")
summary(df)
library(readr)
df <- read_csv("ElginUOF.csv")
summary(df)
df <- read_csv("elgCrime.csv")
df <- read_csv("dfCrime.csv")
df <-df[order(df$Year_Quarter),]
head(df)
library(readr)
df <- read_csv("elgCrime.csv")
df <- read_csv("ElginUOF.csv")
summary(df)
df <-df[order(df$Year_Quarter),]
head(df)
df$sort <- seq.int(nrow(df))
head(df)
View(df)
df$year <- as.numeric(as.character( substr(df$Year_Quarter, start=1, stop=4) ))
df$quarter <- substr(df$Year_Quarter, start=6, stop=7)
names(df)
df$force <- df$UOF_only + df$Total_transitions
names(df)
dfLook <- subset(df, select = c("year","Year_Quarter","force","Total_officer","Total_suspect"))
dfLook
dfLook <- subset(df, select = c("year","Year_Quarter","force","Total_officer","Total_suspect","sort"))
dfLook
dfLook$Officer_major <- df$Officer_mayor
dfLook$Suspect_major <- df$Suspect_major
write_csv(dfLook,"dfLook.csv")
summary(dfLook)
library(ggplot2)
library(ggthemes)
qplot(force,Total_officer,
data=dfLook,
xlab="UOF incidents",
ylab="officer injuried") +
stat_smooth(method="lm") +
facet_grid(. ~ factor(Officer_major))
qplot(force,Total_officer,
data=dfLook,
xlab="UOF incidents",
ylab="officer injuried") +
stat_smooth(method="lm") +
facet_grid(. ~ factor(year))
qplot(force,Total_officer,
data=dfLook,
xlab="UOF incidents",
ylab="officer injuried") +
stat_smooth(method="lm") +
facet_grid(factor(Officer_major) ~ factor(year))
fit_officer <- lm(force ~ Total_officer, data = dfLook)
summary(fit_officer)
officer <- ggplot(dfLook) +
aes(x=force,
y=Total_officer
) +
geom_point(stat="identity",
size = 3,
shape=21,
color="black",
aes(
fill=factor(year) ) # different colors for years
) +
geom_smooth(method=lm) +
theme_fivethirtyeight()
officer <- officer +
labs(
title="Use of force and officer injuries", # your headline
subtitle="There's not much connection between \nuse of physical force and officer injuries",
x="USE OF FORCE INCIDENTS",
y="INJURIES TO OFFICERS",
caption="\nSource: Elgin police") +
scale_y_continuous(breaks=c(seq(0,10,2)) )
officer <- officer +
theme(legend.position="top",
legend.direction="horizontal",
legend.title = element_blank())
officer <- officer + theme(
plot.background = element_rect(fill = "white"),
legend.background = element_rect(fill = "white"),
plot.title = element_text(size = 32),
plot.subtitle = element_text(size = 20),
legend.text=element_text(size=16),
axis.title=element_text(size=16, face="bold"),
axis.text=element_text(size=14),
plot.caption=element_text(size=14, hjust=0)
)
officer
library(readr)
df <- read_csv("homeExem.csv")
names(df)
summary(df)
library(ggplot2)
library(ggthemes)
boxgfx <- ggplot(df) +
aes(x = County,
y = ExemRate,
fill = factor(County)
) +
geom_boxplot() +
theme_fivethirtyeight() +
geom_jitter()
boxgfx <- boxgfx + labs(
title="Accepted exemptions", # your headline
subtitle="Some assessors are more diligent about tracking \nthe validity of homestead exemptions that can reduce \na home's assessed value by $6,000 to $7,000.",
x="County",
y="PERCENT WITH\nHOMESTEAD EXEMPTIONS",
caption="\n* For brevity, includes two townships in Will County.\nSource: County assessment offices")
boxgfx <- boxgfx +
theme(legend.position="None")
boxgfx <- boxgfx + theme(
plot.background = element_rect(fill = "white"),
legend.background = element_rect(fill = "white"),
plot.title = element_text(size = 32),
plot.subtitle = element_text(size = 20),
legend.text=element_text(size=16),
axis.title=element_text(size=16, face="bold"),
axis.text=element_text(size=14),
plot.caption=element_text(size=14, hjust=0)
)
boxgfx
