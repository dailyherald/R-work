xrange
yrange <- range(0,df$SOF_only,df$UOF_only,df$Transitions)
yrange
plot(xrange, yrange, type="n", axes=FALSE,
xlab = "Year, Quarter", ylab = "Incidents",
main = "Total RTR incidents")
lines(df$SOF_only,
type = "b",
pch=19,
col = "orange",
lwd=2)
lines(df$UOF_only,
type = "b",
pch=17,
col = "blue",
lwd=2)
lines(df$Transitions,
type = "b",
pch=15,
col = "darkgreen",
lwd=2)
?pch
axis(1, las=1, at=1:xrange[2],
tck = .05,
lab=c("1Q\n2014","2Q","3Q","4Q","1Q\n2015","2Q","3Q","4Q","1Q\n2016","2Q","3Q","4Q") )
axis(1, las=1, at=1:xrange[2],
tck = .05,
lab=c("1Q\n2014","2Q\n","3Q","4Q","1Q\n2015","2Q","3Q","4Q","1Q\n2016","2Q","3Q","4Q") )
dev.off()
xrange <- range(1,NROW(df$Year_Quarter))
xrange
yrange <- range(0,df$SOF_only,df$UOF_only,df$Transitions)
yrange
plot(xrange, yrange, type="n", axes=FALSE,
xlab = "Year, Quarter", ylab = "Incidents",
main = "Total RTR incidents")
lines(df$SOF_only,
type = "b",
pch=19,
col = "orange",
lwd=2)
lines(df$UOF_only,
type = "b",
pch=17,
col = "blue",
lwd=2)
lines(df$Transitions,
type = "b",
pch=15,
col = "darkgreen",
lwd=2)
axis(1, las=1, at=1:xrange[2],
tck = .05,
lab=c("1Q\n2014","2Q\n","3Q\n","4Q\n","1Q\n2015","2Q\n","3Q\n","4Q\n","1Q\n2016","2Q\n","3Q\n","4Q\n") )
axis(1, las=1, at=1:xrange[2],
tck = .05,
lab=c("1Q\n\b2014","2Q\n","3Q\n","4Q\n","1Q\n2015","2Q\n","3Q\n","4Q\n","1Q\n2016","2Q\n","3Q\n","4Q\n") )
dev.off()
xrange <- range(1,NROW(df$Year_Quarter))
xrange
yrange <- range(0,df$SOF_only,df$UOF_only,df$Transitions)
yrange
plot(xrange, yrange, type="n", axes=FALSE,
xlab = "Year, Quarter", ylab = "Incidents",
main = "Total RTR incidents")
lines(df$SOF_only,
type = "b",
pch=19,
col = "orange",
lwd=2)
lines(df$UOF_only,
type = "b",
pch=17,
col = "blue",
lwd=2)
lines(df$Transitions,
type = "b",
pch=15,
col = "darkgreen",
lwd=2)
axis(1, las=1, at=1:xrange[2],
tck = .05,
lab=c("1Q\n2014","2Q\n","3Q\n","4Q\n","1Q\n2015","2Q\n","3Q\n","4Q\n","1Q\n2016","2Q\n","3Q\n","4Q\n") )
axis(2, las=1, at=5*0:yrange[2], tck = 1, lty=3)
legend(1, yrange[2],
c("SOF Only","UOF only", "Transition"),
cex=0.8,
col=c("Orange","blue","darkgreen"),
pch=c(19,17,15), lwd=2)
library(readr)
df <- read_csv("dfCrime.csv")
summary(df)
with(df, plot(Total_RTR, UOF_only))
title(main = "UOF vs Total RTR incidents")
abline(h=median(df$UOF_only), lty=2, lwd=2)
abline(v=median(df$Total_RTR), lwd=2, col="red")
fit <- lm(df$UOF_only~df$Total_RTR)
summary(fit)
abline(fit)
?sp
library(readr)
df <- read_csv("dfCrime.csv")
names(df)
summary(df)
library(ggplot2)
library(ggthemes)
qplot(Total_RTR,
data=df,
alpha=.05, # sets transparency
fill=factor(year)
)
qplot(Total_RTR, data=df,
geom="density",
color=factor(year),
fill=factor(year),
linetype = factor(year),
alpha=I(.5), # I() keeps alpha out of legend
main="Distribution of RTR incidents",
xlab="Total RTR incidents",
ylab="Density")
qplot(y=Total_RTR,
data=df
) + geom_smooth(method = "lm")
qplot(y=Total_RTR,
data=df,
color=factor(year)
)
qplot(Total_RTR,UOF_only,
data=df,
geom=c("point","smooth")
)
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year)
) + geom_smooth(method = "lm")#, se = FALSE)
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year),
xlab="Total RTR", ylab="UOF") + facet_grid(. ~ factor(year))
qplot(factor(year), SOF_only,
data=df,
geom=c("boxplot", "jitter"),
fill=factor(year),
alpha=I(.5),
main="SOF by Year",
xlab="Year", ylab="SOF")
qplot(factor(Year_Quarter), SOF_only,
data=df,
geom=c("dotplot"),
fill=factor(year),
stackdir = "center", binaxis = "y",
main="SOF by Year, quarter",
xlab="Year", ylab="SOF")  + coord_flip()
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year),
xlab="Total RTR", ylab="UOF") + facet_grid(. ~ factor(year))
library(readr)
df <- read_csv("ElginUOF.csv")
summary(df)
df <-df[order(df$Year_Quarter),]
head(df)
df$sort <- seq.int(nrow(df))
head(df)
df$year <- as.numeric(as.character( substr(df$Year_Quarter, start=1, stop=4) ))
df$quarter <- substr(df$Year_Quarter, start=6, stop=7)
names(df)
df$force <- df$UOF_only + df$Total_transitions
names(df)
dfLook <- subset(df, select = c("year","Year_Quarter","force","Total_officer","Total_suspect"))
dfLook
dfLook$Officer_major <- df$Officer_mayor
dfLook$Suspect_major <- df$Suspect_major
write_csv(dfLook,"dfLook.csv")
summary(dfLook)
library(ggplot2)
library(ggthemes)
theme_gfx <- function(...) {
theme_fivethirtyeight() +
theme(
plot.background = element_rect(fill = "white"),
legend.background = element_rect(fill = "white"),
plot.title = element_text(size = 30),
plot.subtitle = element_text(size = 18),
legend.text=element_text(size=15),
axis.title=element_text(size=15, face="bold"),
axis.text=element_text(size=13),
plot.caption=element_text(size=12, hjust=0),
# This puts the legend across the top
legend.position="top",
legend.direction="horizontal",
# removes label for legend
legend.title = element_blank(),
...
)
}
qplot(force,Total_officer,
data=dfLook,
xlab="UOF incidents",
ylab="officer injuried") +
stat_smooth(method="lm") +
facet_grid(. ~ factor(Officer_major))
qplot(force,Total_officer,
data=dfLook,
xlab="UOF incidents",
ylab="officer injuried") +
stat_smooth(method="lm") +
facet_grid(. ~ factor(year))
qplot(force,Total_officer,
data=dfLook,
xlab="UOF incidents",
ylab="officer injuried") +
stat_smooth(method="lm") +
facet_grid(factor(Officer_major) ~ factor(year))
fit_officer <- lm(force ~ Total_officer, data = dfLook)
summary(fit_officer)
officer <- ggplot(dfLook) +
aes(x=force,
y=Total_officer
) +
geom_point(stat="identity",
size = 3,
shape=21,
color="black",
aes(
fill=factor(year) ) # different colors for years
) +
geom_smooth(method=lm) +
theme_gfx()
officer <- officer +
labs(
title="Use of force and officer injuries", # your headline
subtitle="There's not much connection between \nuse of physical force and officer injuries",
x="USE OF FORCE INCIDENTS",
y="INJURIES TO OFFICERS",
caption="\nSource: Elgin police") +
scale_y_continuous(breaks=c(seq(0,10,2)) )
officer
library(readr)
df <- read_csv("dfCrime.csv")
summary(df)
with(df, plot(Total_RTR, UOF_only))
title(main = "UOF vs Total RTR incidents")
abline(h=median(df$UOF_only), lty=2, lwd=2)
abline(v=median(df$Total_RTR), lwd=2, col="red")
fit <- lm(df$UOF_only~df$Total_RTR)
summary(fit)
abline(fit)
with(df, plot(Total_RTR, UOF_only))
title(main = "UOF vs Total RTR incidents")
abline(h=median(df$UOF_only), lty=2, lwd=2)
abline(v=median(df$Total_RTR), lwd=2, col="red")
fit <- lm(df$UOF_only~df$Total_RTR)
abline(fit)
abline(h=mean(df$UOF_only), lty=2, lwd=2)
abline(v=mean(df$Total_RTR), lwd=2, col="red")
?mfrow
?par
par(mfrow=c(3,2),mar=c(4,4,2,1))
with(df, plot(Total_RTR, UOF_only))
title(main = "UOF vs Total RTR incidents")
abline(h=median(df$UOF_only), lty=2, lwd=2)
abline(v=median(df$Total_RTR), lwd=2, col="red")
abline(lm(df$UOF_only~df$Total_RTR))
with(df, plot(Total_RTR, SOF_only))
title(main = "SOF vs Total RTR incidents")
abline(h=median(df$SOF_only), lty=2, lwd=2)
abline(v=median(df$Total_RTR), lwd=2, col="red")
abline(lm(df$SOF_only~df$Total_RTR))
with(df, plot(Total_RTR, Transitions))
title(main = "Transitions vs Total RTR incidents")
abline(h=median(df$Transitions), lty=2, lwd=2)
abline(v=median(df$Total_RTR), lwd=2, col="red")
abline(lm(df$Transitions~df$Total_RTR))
?par
par(mfrow=c(3,1),mar=c(4,4,2,1))
# Let's add the plot we already did
with(df, plot(Total_RTR, UOF_only))
title(main = "UOF vs Total RTR incidents")
abline(h=median(df$UOF_only), lty=2, lwd=2)
abline(v=median(df$Total_RTR), lwd=2, col="red")
abline(lm(df$UOF_only~df$Total_RTR))
# now SOF
with(df, plot(Total_RTR, SOF_only))
title(main = "SOF vs Total RTR incidents")
abline(h=median(df$SOF_only), lty=2, lwd=2)
abline(v=median(df$Total_RTR), lwd=2, col="red")
abline(lm(df$SOF_only~df$Total_RTR))
# finally, transitions
with(df, plot(Total_RTR, Transitions))
title(main = "Transitions vs Total RTR incidents")
abline(h=median(df$Transitions), lty=2, lwd=2)
abline(v=median(df$Total_RTR), lwd=2, col="red")
abline(lm(df$Transitions~df$Total_RTR))
par(mfrow=c(3,1),mar=c(4,4,2,1))
with(df, plot(Total_RTR, UOF_only,
xlim=c(0, 60), ylim=c(0, 40)))
title(main = "UOF vs Total RTR incidents")
abline(h=median(df$UOF_only), lty=2, lwd=2)
abline(v=median(df$Total_RTR), lwd=2, col="red")
abline(lm(df$UOF_only~df$Total_RTR))
with(df, plot(Total_RTR, SOF_only,
xlim=c(0, 60), ylim=c(0, 40)))
title(main = "SOF vs Total RTR incidents")
abline(h=median(df$SOF_only), lty=2, lwd=2)
abline(v=median(df$Total_RTR), lwd=2, col="red")
abline(lm(df$SOF_only~df$Total_RTR))
with(df, plot(Total_RTR, Transitions,
xlim=c(0, 60), ylim=c(0, 40)))
title(main = "Transitions vs Total RTR incidents")
abline(h=median(df$Transitions), lty=2, lwd=2)
abline(v=median(df$Total_RTR), lwd=2, col="red")
abline(lm(df$Transitions~df$Total_RTR))
par(mfrow=c(3,1),mar=c(4,4,2,1))
with(df, plot(Total_RTR, UOF_only,
xlim=c(0, 60), ylim=c(0, 35)))
title(main = "UOF vs Total RTR incidents")
abline(h=median(df$UOF_only), lty=2, lwd=2)
abline(v=median(df$Total_RTR), lwd=2, col="red")
abline(lm(df$UOF_only~df$Total_RTR))
with(df, plot(Total_RTR, SOF_only,
xlim=c(0, 60), ylim=c(0, 35)))
title(main = "SOF vs Total RTR incidents")
abline(h=median(df$SOF_only), lty=2, lwd=2)
abline(v=median(df$Total_RTR), lwd=2, col="red")
abline(lm(df$SOF_only~df$Total_RTR))
with(df, plot(Total_RTR, Transitions,
xlim=c(0, 60), ylim=c(0, 35)))
title(main = "Transitions vs Total RTR incidents")
abline(h=median(df$Transitions), lty=2, lwd=2)
abline(v=median(df$Total_RTR), lwd=2, col="red")
abline(lm(df$Transitions~df$Total_RTR))
summary(lm(df$Transitions~df$Total_RTR))
plot(df$Total_RTR, df$UOF_only,
main = "Response to resistance incidents",
xlab="Total response to resistance incidents",
ylab="Response by type",
xlim=c(20,60), ylim=c(0,40),col="red",pch=19)
points(df$Total_RTR,df$SOF_only,col="blue",pch=19)
points(df$Total_RTR,df$Transitions,col="green",pch=19)
legend("topleft", pch = c(19,19,19), col = c("red","blue","green"), legend = c("UOF", "SOF", "Transitions"))
abline(lm(df$UOF_only~df$Total_RTR, par(col="red")))
abline(lm(df$SOF_only~df$Total_RTR, par(col="blue")))
abline(lm(df$Transitions~df$Total_RTR, par(col="green")))
dev_off()
dev.off()
plot(df$Total_RTR, df$UOF_only,
main = "Response to resistance incidents",
xlab="Total response to resistance incidents",
ylab="Response by type",
xlim=c(20,60), ylim=c(0,40),col="red",pch=19)
points(df$Total_RTR,df$SOF_only,col="blue",pch=19)
points(df$Total_RTR,df$Transitions,col="green",pch=19)
legend("topleft", pch = c(19,19,19), col = c("red","blue","green"), legend = c("UOF", "SOF", "Transitions"))
abline(lm(df$UOF_only~df$Total_RTR, par(col="red")))
abline(lm(df$SOF_only~df$Total_RTR, par(col="blue")))
abline(lm(df$Transitions~df$Total_RTR, par(col="green")))
library(readr)
df <- read_csv("dfCrime.csv")
summary(df)
plot(df$Total_RTR, df$UOF_only,
main = "UOF vs Total RTR incidents",
# sub = "Daily Herald graphic",
xlab="Total response to resistance incidents",
ylab="Use of force incidents only")
y2014 <- subset(df, year==2014)
dev.off()
plot(df$Total_RTR, df$UOF_only,
main = "UOF vs Total RTR incidents",
# sub = "Daily Herald graphic",
xlab="Total response to resistance incidents",
ylab="Use of force incidents only")
y2014 <- subset(df, year==2014)
points(y2014$Total_RTR,y2014$UOF_only,col="red",pch=19)
y2015 <- subset(df, year==2015)
points(y2015$Total_RTR,y2015$UOF_only,col="blue",pch=19)
y2016 <- subset(df, year==2016)
points(y2016$Total_RTR,y2016$UOF_only,col="green",pch=19)
legend("topleft", pch = c(19,19,19), col = c("red","blue","green"), legend = c("2014", "2015", "2016"))
abline(lm(df$UOF_only~df$Total_RTR))
summary(df)
plot(df$Total_RTR, df$UOF_only,
main = "Response to resistance incidents",
xlab="Total response to resistance incidents",
ylab="Response by type",
xlim=c(20,60), ylim=c(0,40),col="red",pch=19)
points(df$Total_RTR,df$SOF_only,col="blue",pch=19)
points(df$Total_RTR,df$Transitions,col="green",pch=19)
legend("topleft", pch = c(19,19,19), col = c("red","blue","green"), legend = c("UOF", "SOF", "Transitions"))
abline(lm(df$UOF_only~df$Total_RTR, par(col="red")))
abline(lm(df$SOF_only~df$Total_RTR, par(col="blue")))
abline(lm(df$Transitions~df$Total_RTR, par(col="green")))
plot(df$Total_RTR, df$UOF_only,
main = "UOF vs Total RTR incidents",
# sub = "Daily Herald graphic",
xlab="Total response to resistance incidents",
ylab="Use of force incidents only")
dev.off()
plot(df$Total_RTR, df$UOF_only,
main = "UOF vs Total RTR incidents",
# sub = "Daily Herald graphic",
xlab="Total response to resistance incidents",
ylab="Use of force incidents only")
dev.off()
plot(df$Total_RTR, df$UOF_only,
xlim=c(0, 60), ylim=c(0, 35),
main = "UOF vs Total RTR incidents",
xlab="Total response to resistance incidents",
ylab="Use of force incidents only")
y2014 <- subset(df, year==2014)
y2015 <- subset(df, year==2015)
y2016 <- subset(df, year==2016)
points(y2014$Total_RTR,y2014$UOF_only,col="red",pch=19)
points(y2015$Total_RTR,y2015$UOF_only,col="blue",pch=19)
points(y2016$Total_RTR,y2016$UOF_only,col="green",pch=19)
legend("topleft",
pch = c(19,19,19),
col = c("red","blue","green"),
legend = c("2014", "2015", "2016"))
abline(lm(df$UOF_only~df$Total_RTR))
dev.off()
plot(df$Total_RTR, df$UOF_only,
main = "Response to resistance incidents",
xlab="Total response to resistance incidents",
ylab="Response by type",
xlim=c(0,60), ylim=c(0,35),col="red",pch=19)
points(df$Total_RTR,df$SOF_only,col="blue",pch=19)
points(df$Total_RTR,df$Transitions,col="green",pch=19)
legend("topleft",
pch = c(19,19,19),
col = c("red","blue","green"),
legend = c("UOF", "SOF", "Transitions"))
abline(lm(df$UOF_only~df$Total_RTR, par(col="red")))
abline(lm(df$SOF_only~df$Total_RTR, par(col="blue")))
abline(lm(df$Transitions~df$Total_RTR, par(col="green")))
?points
?par
knitr::opts_chunk$set(echo = TRUE)
plot(df$Total_RTR, df$UOF_only,
main = "Response to resistance incidents",
xlab="Total response to resistance incidents",
ylab="Response by type",
xlim=c(0,60), ylim=c(0,35),
col=adjustcolor("red", alpha=0.5),
pch=19)
points(df$Total_RTR,df$SOF_only,col="blue",pch=19)
plot(df$Total_RTR, df$UOF_only,
main = "Response to resistance incidents",
xlab="Total response to resistance incidents",
ylab="Response by type",
xlim=c(0,60), ylim=c(0,35),
col=adjustcolor("red", alpha=0.5),
pch=19)
points(df$Total_RTR,df$SOF_only,
col=adjustcolor("blue", alpha=0.5),
pch=19)
points(df$Total_RTR,df$Transitions,
col=adjustcolor("green", alpha=0.5),
pch=19)
legend("topleft",
pch = c(19,19,19),
col = c("red","blue","green"),
legend = c("UOF", "SOF", "Transitions"))
abline(lm(df$UOF_only~df$Total_RTR, par(col="red")))
abline(lm(df$SOF_only~df$Total_RTR, par(col="blue")))
abline(lm(df$Transitions~df$Total_RTR, par(col="green")))
dev.off()
plot(df$Total_RTR, df$UOF_only,
main = "Response to resistance incidents",
xlab="Total response to resistance incidents",
ylab="Response by type",
xlim=c(0,60), ylim=c(0,35),
col=adjustcolor("red", alpha=0.2),
pch=19)
points(df$Total_RTR,df$SOF_only,
col=adjustcolor("blue", alpha=0.2),
pch=19)
points(df$Total_RTR,df$Transitions,
col=adjustcolor("green", alpha=0.2),
pch=19)
legend("topleft",
pch = c(19,19,19),
col = c("red","blue","green"),
legend = c("UOF", "SOF", "Transitions"))
abline(lm(df$UOF_only~df$Total_RTR, par(col="red")))
abline(lm(df$SOF_only~df$Total_RTR, par(col="blue")))
abline(lm(df$Transitions~df$Total_RTR, par(col="green")))
dev.off()
# generate the first plot
plot(df$Total_RTR, df$UOF_only,
main = "Response to resistance incidents",
xlab="Total response to resistance incidents",
ylab="Response by type",
xlim=c(0,60), ylim=c(0,35),
col=adjustcolor("red", alpha=0.4),
pch=19)
# Add the other two sets of points
points(df$Total_RTR,df$SOF_only,
col=adjustcolor("blue", alpha=0.4),
pch=19)
points(df$Total_RTR,df$Transitions,
col=adjustcolor("green", alpha=0.4),
pch=19)
# add the legend
legend("topleft",
pch = c(19,19,19),
col = c("red","blue","green"),
legend = c("UOF", "SOF", "Transitions"))
# Add the regression lines, but color them (par) to match
abline(lm(df$UOF_only~df$Total_RTR, par(col="red")))
abline(lm(df$SOF_only~df$Total_RTR, par(col="blue")))
abline(lm(df$Transitions~df$Total_RTR, par(col="green")))
