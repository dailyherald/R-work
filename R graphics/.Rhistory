fill=factor(year),
bins = 12
)
qplot(Total_RTR,
data=df,
fill=factor(year),
bins = 12
)
qplot(Total_RTR,
data=df,
fill=factor(year),
bins = 10
)
qplot(Total_RTR,
data=df,
fill=factor(year),
bins = 5
)
qplot(Total_RTR,
data=df,
fill=factor(year),
bins = 2
)
qplot(Total_RTR,
data=df,
fill=factor(year),
bins = 12
)
qplot(Total_RTR, data=df,
geom="density",
color=factor(year),
fill=factor(year),
linetype = factor(year),
alpha=I(.5), # I() keeps alpha out of legend
main="Distribution of RTR incidents",
xlab="Total RTR incidents",
ylab="Density")
qplot(y=Total_RTR,
data=df
) + geom_smooth(method = "lm")
qplot(y=Total_RTR,
data=df,
color=factor(year)
)
qplot(Total_RTR,UOF_only,
data=df,
geom=c("point","smooth")
)
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year)
) + geom_smooth(method = "lm")#, se = FALSE)
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year),
xlab="Total RTR", ylab="UOF") + facet_grid(. ~ factor(year))
qplot(factor(year), SOF_only,
data=df,
geom=c("boxplot", "jitter"),
fill=factor(year),
alpha=I(.5),
main="SOF by Year",
xlab="Year", ylab="SOF")
qplot(factor(Year_Quarter), SOF_only,
data=df,
geom=c("dotplot"),
fill=factor(year),
stackdir = "center", binaxis = "y",
main="SOF by Year, quarter",
xlab="Year", ylab="SOF")  + coord_flip()
library(readr)
library(rgdal)
library(dplyr)
library(RColorBrewer) # for my color ramp
library(viridis)
library(scales)
library(ggplot2)
library(ggmap)
library(ggthemes)
theme_map <- function(...) {
theme_fivethirtyeight() +
theme(
plot.background = element_rect(fill = "white"),
plot.title = element_text(size = 24),
plot.subtitle = element_text(size = 16),
plot.caption=element_text(size=12, hjust=0),
legend.position="right",
legend.direction="vertical",
legend.background = element_rect(fill = "white"),
legend.title=element_text(size=10, face="bold"),
legend.text=element_text(size=10),
legend.text.align = 0, # 0 = left, 1 = right
axis.text.x=element_blank(),
axis.text.y=element_blank(),
panel.grid.major = element_blank(),
panel.background = element_blank(),
...
)
}
ill_f <- read.csv("ill_f.csv", stringsAsFactors = FALSE)
head(ill_f)
summary(ill_f)
names(ill_f)
summary(ill_f$Rchg_65over)
quantile(ill_f$Rchg_65over, probs = seq(0, 1, .2))
no_classes <- 5
labels <- c()
quantiles <- quantile(ill_f$Rchg_65over, # data you wish to work with
probs = seq(0, 1, length.out = no_classes + 1))
labels <- c()
for(idx in 1:length(quantiles)){
labels <- c(labels, paste0(round(quantiles[idx], 2),
" to ",
round(quantiles[idx + 1], 2)))
}
labels <- labels[1:length(labels)-1]
ill_f$Rchg_65over_quantiles <- cut(ill_f$Rchg_65over,
breaks = quantiles,
labels = labels,
include.lowest = T)
map <- ggplot(ill_f,
aes(long, lat, group = group, fill = Rchg_65over_quantiles)
) +
geom_polygon( color = "white", size = 0.15) + coord_map() + theme_map() +
guides(fill = guide_legend(reverse = TRUE))
map <- map + labs(
title="65 and over", # your headline
subtitle="Percent change in the rate\nper 1,000 of persons aged 65\nand over, 2010 - 2016",
caption="\nSource: Census.gov",
fill = "PERCENT\nCHANGE")
map <- map + scale_fill_brewer(type = "div",
palette = "BrBG",
direction = 1
)
map
map <- ggplot(ill_f,
aes(long, lat, group = group, fill = Rchg_65over_quantiles)
) +
geom_polygon( color = "black", size = 0.15) + coord_map() + theme_map() +
guides(fill = guide_legend(reverse = TRUE))
map <- map + labs(
title="65 and over", # your headline
subtitle="Percent change in the rate\nper 1,000 of persons aged 65\nand over, 2010 - 2016",
caption="\nSource: Census.gov",
fill = "PERCENT\nCHANGE")
map <- map + scale_fill_brewer(type = "div",
palette = "BrBG",
direction = 1
)
map
dev.off()
map <- ggplot(ill_f,
aes(long, lat, group = group, fill = Rchg_65over_quantiles)
) +
geom_polygon( color = "white", size = 0.15) + coord_map() + theme_map()
map <- map + labs(
title="65 and over", # your headline
subtitle="Percent change in the rate\nper 1,000 of persons aged 65\nand over, 2010 - 2016",
caption="\nSource: Census.gov",
fill = "PERCENT\nCHANGE")
map <- map + scale_fill_manual(
values = c("#a6611a", "#dfc27d", "#f6e8c3", "#80cdc1", "#018571")
) +
guides(fill = guide_legend(reverse = TRUE))
map
dev.off()
labels2 <- c()
for(idx in 1:length(quantiles)){
labels2 <- c(labels2, paste0(round(quantiles[idx], 1),
" -\n",
round(quantiles[idx + 1], 1),
"%"
))
}
labels2 <- labels2[1:length(labels2)-1]
ill_f$Rchg_65over_brks <- cut(ill_f$Rchg_65over,
breaks = quantiles,
include.lowest = TRUE,
labels = labels2)
brks_scale <- levels(ill_f$Rchg_65over_brks)
labels_scale <-brks_scale
labels_scale
map <- ggplot(ill_f,
aes(long, lat, group = group, fill = Rchg_65over_quantiles)
) +
geom_polygon( color = "white", size = 0.15) + coord_map() + theme_map()
map <- map + labs(
title="65 and over", # your headline
subtitle="Percent change in the rate\nper 1,000 of persons aged 65\nand over, 2010 - 2016",
caption="\nSource: Census.gov",
fill = "PERCENT CHANGE")
map <- map +
theme(legend.position = "top", legend.direction = "horizontal") +
scale_fill_manual(
values = c("#a6611a", "#dfc27d", "#f6e8c3", "#80cdc1", "#018571"),
drop = FALSE,
labels = labels_scale,
guide = guide_legend(
direction = "horizontal",
keyheight = unit(2, units = "mm"),
keywidth = unit(75 / length(labels), units = "mm"),
title.position = 'top',
# I shift the labels around, the should be placed
# exactly at the right end of each legend key
title.hjust = 0.5,
#label.hjust = 1,
nrow = 1,
byrow = T,
# Can reverse the legend if that's clearer
reverse = F,
label.position = "bottom"
)
)
map
dev.off()
map <- ggplot(ill_f,
aes(long, lat, group = group, fill = Rchg_65over_quantiles)
) +
geom_polygon( color = "white", size = 0.15) + coord_map() + theme_map()
map <- map + labs(
title="65 and over", # your headline
subtitle="Percent change in the rate\nper 1,000 of persons aged 65\nand over, 2010 - 2016",
caption="\nSource: Census.gov",
fill = "PERCENT\nCHANGE")
map <- map + theme(legend.position = "right") +
scale_fill_viridis(option = "B",# A, B, C or D
direction=1,
discrete = T,
#breaks = pretty_breaks(n=7),
guide = guide_legend(
keyheight = unit(5, units = "mm"),
title.position = 'top',
reverse = T
)
)
map
dev.off()
map <- ggplot(ill_f,
aes(long, lat, group = group, fill = Rchg_65over_quantiles)
) +
geom_polygon( color = "white", size = 0.15) + coord_map() + theme_map()
map <- map + labs(
title="65 and over", # your headline
subtitle="Percent change in the rate\nper 1,000 of persons aged 65\nand over, 2010 - 2016",
caption="\nSource: Census.gov",
fill = "PERCENT CHANGE")
map <- map +
theme(legend.position = "top", legend.direction = "horizontal") +
scale_fill_manual(
# viridis, magma, plasma or inferno
# (#) = number of breaks, [4:8] takes last 5
values = magma(8)[3:7],
drop = FALSE,
labels = labels_scale,
guide = guide_legend(
direction = "horizontal",
keyheight = unit(2, units = "mm"),
keywidth = unit(75 / length(labels), units = "mm"),
title.position = 'top',
# I shift the labels around, the should be placed
# exactly at the right end of each legend key
title.hjust = 0.5,
#label.hjust = 1,
nrow = 1,
byrow = T,
# Can reverse the legend if that's clearer
reverse = F,
label.position = "bottom"
)
)
map
library(readr)
library(ggplot2)
library(ggthemes)
df <- read_csv("dfCrime.csv")
summary(df)
qplot(Total_RTR,
data=df,
fill=factor(year),
bins = 12
)
qplot(Total_RTR, data=df,
geom="density",
color=factor(year),
fill=factor(year),
linetype = factor(year),
alpha=I(.5), # I() keeps alpha out of legend
main="Distribution of RTR incidents",
xlab="Total RTR incidents",
ylab="Density")
qplot(Total_RTR, data=df,
geom="density",
#color=factor(year),
fill=factor(year),
linetype = factor(year),
alpha=I(.5), # I() keeps alpha out of legend
main="Distribution of RTR incidents",
xlab="Total RTR incidents",
ylab="Density")
qplot(Total_RTR, data=df,
geom="density",
fill=factor(year),
color=factor(year),
linetype = factor(year),
alpha=I(.5), # I() keeps alpha out of legend
main="Distribution of RTR incidents",
xlab="Total RTR incidents",
ylab="Density")
qplot(y=Total_RTR,
data=df
) + geom_smooth(method = "lm")
qplot(y=Total_RTR,
data=df,
color=factor(year)
) + geom_smooth(method = "lm")
qplot(y=Total_RTR,
data=df,
color=factor(year)
)
qplot(Total_RTR,UOF_only,
data=df,
geom=c("point","smooth")
)
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year)
) + geom_smooth(method = "lm")#, se = FALSE)
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year),
xlab="Total RTR", ylab="UOF") + facet_grid(. ~ factor(year))
qplot(factor(year), SOF_only,
data=df,
geom=c("boxplot", "jitter"),
fill=factor(year),
alpha=I(.5),
main="SOF by Year",
xlab="Year", ylab="SOF")
qplot(factor(Year_Quarter), SOF_only,
data=df,
geom=c("dotplot"),
fill=factor(year),
stackdir = "center", binaxis = "y",
main="SOF by Year, quarter",
xlab="Year", ylab="SOF")  + coord_flip()
qplot(y=Total_RTR,
data=df
) + geom_smooth(method = "lm")
qplot(y=Total_RTR,
data=df)
qplot(y=Total_RTR,
data=df,
color=factor(year)
)
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year)
) + geom_smooth(method = "lm")#, se = FALSE)
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year)
) #+ geom_smooth(method = "lm")#, se = FALSE)
qplot(Total_RTR,UOF_only,
data=df,
geom=c("point","smooth")
)
qplot(Total_RTR,UOF_only,
data=df,
#geom=c("point","smooth")
) + geom_smooth(method = "lm")
qplot(Total_RTR,UOF_only,
data=df
#geom=c("point","smooth")
) + geom_smooth(method = "lm")
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year)
) + geom_smooth(method = "lm")#, se = FALSE)
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year)
)# + geom_smooth(method = "lm")#, se = FALSE)
qplot(Total_RTR,UOF_only,
data=df
#geom=c("point","smooth")
) + geom_smooth(method = "lm")
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year)
) + geom_smooth(method = "lm", se = FALSE)
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year),
xlab="Total RTR", ylab="UOF") + facet_grid(. ~ factor(year))
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year),
xlab="Total RTR", ylab="UOF") +
facet_grid(. ~ factor(year))  +
geom_smooth(method = "lm", se = FALSE)
qplot(Total_RTR,UOF_only,
data=df
) + geom_smooth(method = "lm")
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year)
) + geom_smooth(method = "lm", se = FALSE)
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year),
xlab="Total RTR", ylab="UOF") +
facet_grid(. ~ factor(year))  +
geom_smooth(method = "lm", se = FALSE)
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year),
xlab="Total RTR", ylab="UOF") +
facet_grid(Total_RTR ~ factor(year))  +
geom_smooth(method = "lm", se = FALSE)
View(df)
qplot(Total_RTR,UOF_only,
data=df,
color=factor(year),
xlab="Total RTR", ylab="UOF") +
facet_grid(quarter ~ factor(year))  +
geom_smooth(method = "lm", se = FALSE)
qplot(factor(year), SOF_only,
data=df,
geom=c("boxplot", "jitter"),
fill=factor(year),
alpha=I(.5),
main="SOF by Year",
xlab="Year", ylab="SOF")
qplot(factor(year), SOF_only,
data=df,
geom="boxplot",
#geom=c("boxplot", "jitter"),
fill=factor(year),
alpha=I(.5),
main="SOF by Year",
xlab="Year", ylab="SOF")
qplot(factor(Year_Quarter), SOF_only,
data=df,
geom=c("dotplot"),
fill=factor(year),
stackdir = "center", binaxis = "y",
main="SOF by Year, quarter",
xlab="Year", ylab="SOF")  + coord_flip()
qplot(factor(year), SOF_only,
data=df,
geom=c("dotplot"),
fill=factor(year),
stackdir = "center", binaxis = "y",
main="SOF by Year, quarter",
xlab="Year", ylab="SOF")  + coord_flip()
qplot(factor(quarter), SOF_only,
data=df,
geom=c("dotplot"),
fill=factor(year),
stackdir = "center", binaxis = "y",
main="SOF by Year, quarter",
xlab="Year", ylab="SOF")  + coord_flip()
qplot(factor(Year_Quarter), SOF_only,
data=df,
geom=c("dotplot"),
fill=factor(year),
stackdir = "center", binaxis = "y",
main="SOF by Year, quarter",
xlab="Year", ylab="SOF")  + coord_flip()
qplot(factor(Year_Quarter), SOF_only,
data=df,
geom=c("dotplot"),
fill=factor(year),
stackdir = "up", binaxis = "y",
main="SOF by Year, quarter",
xlab="Year", ylab="SOF")  + coord_flip()
qplot(factor(Year_Quarter), SOF_only,
data=df,
geom=c("dotplot"),
fill=factor(year),
stackdir = "center", binaxis = "x",
main="SOF by Year, quarter",
xlab="Year", ylab="SOF")  + coord_flip()
qplot(factor(Year_Quarter), SOF_only,
data=df,
geom=c("dotplot"),
fill=factor(year),
stackdir = "center", binaxis = "y",
main="SOF by Year, quarter",
xlab="Year", ylab="SOF")  + coord_flip()
qplot(factor(Year_Quarter), SOF_only,
data=df,
geom=c("dotplot"),
fill=factor(year),
stackdir = "center", binaxis = "y",
main="SOF by Year, quarter",
xlab="Year", ylab="SOF")#  + coord_flip()
qplot(factor(Year_Quarter), SOF_only,
data=df,
geom=c("dotplot"),
fill=factor(year),
stackdir = "center", binaxis = "x",
main="SOF by Year, quarter",
xlab="Year", ylab="SOF")#  + coord_flip()
y
qplot(factor(Year_Quarter), SOF_only,
data=df,
geom=c("dotplot"),
fill=factor(year),
stackdir = "center", binaxis = "y",
main="SOF by Year, quarter",
xlab="Year", ylab="SOF")  + coord_flip()
